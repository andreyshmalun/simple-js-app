let pokemonRepository = function () { let e = []; function a(a) { "object" == typeof a && "detailsUrl" in a ? e.push(a) : console.log("Pokemon is not an object!") } function b() { return e } function c(a) { return fetch(a.detailsUrl).then(function (a) { return a.json() }).then(function (b) { a.imageUrl = b.sprites.other.dream_world.front_default, a.height = b.height, a.weight = b.weight, a.types = b.types.map(a => a.type.name).join(", "), a.abilities = b.abilities.map(a => a.ability.name).join(", ") }).catch(function (a) { console.error(a) }) } function d(a) { c(a).then(function () { var b; let c, d, f, e, g, h, i, j; b = a, c = $(".modal-body"), d = $(".modal-title"), d.empty(), c.empty(), f = $("<h1>" + b.name + "</h1>"), e = $('<img class="pokemon-img">'), e.attr("src", b.imageUrl), g = $("<p>Height : " + b.height + "</p>"), h = $("<p>Weight : " + b.weight + "</p>"), i = $("<p>Types : " + b.types + "</p>"), j = $("<p>Abilities : " + b.abilities + "</p>"), d.append(f), c.append(e), c.append(g), c.append(h), c.append(i), c.append(j) }) } return document.querySelector("#pokemon-modal"), { add: a, getAll: b, addListItem: function (c) { let e = document.querySelector(".pokemon-list"), b = document.createElement("li"), a = document.createElement("button"); a.classList.add("pokemonButton", "button-class", "btn"), a.innerText = c.name.toUpperCase(), a.setAttribute("data-toggle", "modal"), a.setAttribute("data-target", "#pokemon-modal"), b.appendChild(a), e.appendChild(b), a.addEventListener("click", function (a) { d(c) }) }, loadList: function () { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=200").then(function (a) { return a.json() }).then(function (b) { b.results.forEach(function (b) { a({ name: b.name, detailsUrl: b.url }) }) }).catch(function (a) { console.error(a) }) }, loadDetails: c, showDetails: d } }(); function searchFunction(b) { let c = document.getElementsByClassName("pokemonButton"), { value: d } = b.target, e = d.toLowerCase(); for (let a of c) a.textContent.toLowerCase().includes(e) ? a.closest("li").style.display = "inline-block" : a.closest("li").style.display = "none" } pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (a) { pokemonRepository.addListItem(a) }) }); let search = document.getElementById("search"); search.addEventListener("keyup", searchFunction)